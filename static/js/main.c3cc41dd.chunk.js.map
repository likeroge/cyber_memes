{"version":3,"sources":["panels/Home.js","panels/Second.js","panels/Secret.js","panels/WelcomePage.js","App.js","index.js"],"names":["Home","id","go","fetchedUser","userScore","topUsers","title","before","photo_200","src","description","city","first_name","last_name","style","display","alignItems","marginLeft","length","map","u","info","key","userID","size","onClick","data-to","Second","contentText","bridge","STORAGE","marginTop","Secret","useState","value","setValue","min","max","step","Number","onChange","val","top","bottom","WelcomePage","userSeenWelcomePage","centered","mode","USER_STATUS","App","activePanel","setActivePanel","setUser","popout","setPopout","comments","setComments","setUserScore","setTopUsers","setUserSeenWelcomePage","useEffect","a","send","user","keys","Object","values","storage","data","forEach","JSON","parse","seenWelcomePage","error","console","log","axios","get","commentsData","filter","c","sort","b","topArray","subscribe","detail","type","schemeAttribute","document","createAttribute","scheme","body","attributes","setNamedItem","fetchData","e","currentTarget","dataset","to","seeWelcomePage","stringify","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.c3cc41dd.chunk.js","sourcesContent":["import React from \"react\";\nimport Panel from \"@vkontakte/vkui/dist/components/Panel/Panel\";\nimport PanelHeader from \"@vkontakte/vkui/dist/components/PanelHeader/PanelHeader\";\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\nimport Group from \"@vkontakte/vkui/dist/components/Group/Group\";\nimport Cell from \"@vkontakte/vkui/dist/components/Cell/Cell\";\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\nimport Avatar from \"@vkontakte/vkui/dist/components/Avatar/Avatar\";\nimport Icon28FavoriteCircleFillYellow from \"@vkontakte/icons/dist/28/favorite_circle_fill_yellow\";\n\nconst Home = ({ id, go, fetchedUser, userScore, topUsers }) => (\n\n  <Panel id={id}>\n    <PanelHeader>CyberMemes</PanelHeader>\n    {fetchedUser && (\n      <Group title=\"User Data\">\n        <Cell\n          before={\n            fetchedUser.photo_200 ? (\n              <Avatar  src={fetchedUser.photo_200} />\n            ) : null\n          }\n          description={\n            fetchedUser.city && fetchedUser.city.title\n              ? fetchedUser.city.title\n              : \"\"\n          }\n        >\n          {`${fetchedUser.first_name} ${fetchedUser.last_name}`}\n        </Cell>\n\n        <Cell title=\"User Coins\">\n          <h1>Личный счет:</h1>\n          <Div style={{ display: \"flex\", alignItems: \"center\"}}>\n            <h4> {userScore} </h4>\n            <Icon28FavoriteCircleFillYellow style={{marginLeft: '1rem'}} />\n          </Div>\n        </Cell>\n      </Group>\n    )}\n      \n          <Group title=\"Rating\">\n            \n          {\n            (topUsers && topUsers.length > 1) ? \n            <Cell>\n            <h1>Топ 10 пользователей:</h1>\n    \n                {\n                  topUsers.map((u)=>{\n                    return (\n                      <Cell before={u.info.photo_200? (<Avatar src={u.info.photo_200}/>): null } description={u.info.first_name} key={u.userID}>\n                       <span>{u.info.first_name} {u.info.last_name}</span> \n                      </Cell>\n                    )\n                  })\n                }\n          </Cell>\n          :\n          <Cell><h3>Ты лучший! Пока...</h3></Cell>\n          }\n      </Group> \n  \n      \n   \n\n    <Group title=\"Navigation\">\n      <Div>\n        <Button size=\"xl\" onClick={go} data-to=\"second\">\n          Контент\n        </Button>\n      </Div>\n    </Group>\n  </Panel>\n);\n\nexport default Home;\n","import React from \"react\";\nimport Panel from \"@vkontakte/vkui/dist/components/Panel/Panel\";\nimport PanelHeader from \"@vkontakte/vkui/dist/components/PanelHeader/PanelHeader\";\nimport Group from \"@vkontakte/vkui/dist/components/Group/Group\";\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\n\n\nconst Second = ({ id, go, userScore, bridge, STORAGE }) => {\n  const content1 = \"Контент 1\";\n  const content2 = \"Контент 2\";\n  let contentText = content1;\n\n  if (userScore >= 3) {\n    contentText = content2;\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader>{contentText}</PanelHeader>\n      <Group title=\"Navigation\">\n        <Div>\n          <Button size=\"xl\" onClick={go} data-to=\"home\">\n            Домой\n          </Button>\n          \n          {contentText === content2 && (\n            <Button\n              size=\"xl\"\n              style={{ marginTop: \"1rem\" }}\n              onClick={go}\n              data-to=\"secret\"\n            >\n              Секрет\n            </Button>\n          )}\n        </Div>\n      </Group>\n    </Panel>\n  );\n};\n\nexport default Second;\n","import React, { useState } from \"react\";\nimport Panel from \"@vkontakte/vkui/dist/components/Panel/Panel\";\nimport PanelHeader from \"@vkontakte/vkui/dist/components/PanelHeader/PanelHeader\";\nimport Group from \"@vkontakte/vkui/dist/components/Group/Group\";\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\nimport Slider from \"@vkontakte/vkui/dist/components/Slider/Slider\";\n\nimport { Cell, FormLayout } from \"@vkontakte/vkui\";\n\nconst Secret = ({ id, go }) => {\n  const [value, setValue] = useState(0);\n\n  return (\n    <Panel id={id}>\n      <PanelHeader>Секрет</PanelHeader>\n\n      <FormLayout>\n        <Slider\n          min={0}\n          max={5}\n          step={1}\n          value={Number(value)}\n          onChange={(val) => setValue(val)}\n          top=\"Квадрат числа:\"\n          bottom={`${value}`}\n        />\n\n        <Cell>\n          Квадрат числа {value} = {value * value}\n        </Cell>\n      </FormLayout>\n\n      <Group title=\"Navigation\">\n        <Div>\n          <Button size=\"xl\" onClick={go} data-to=\"home\">\n            Домой\n          </Button>\n        </Div>\n      </Group>\n    </Panel>\n  );\n};\n\nexport default Secret;\n","import React from \"react\";\nimport Panel from \"@vkontakte/vkui/dist/components/Panel/Panel\";\nimport PanelHeader from \"@vkontakte/vkui/dist/components/PanelHeader/PanelHeader\";\nimport Group from \"@vkontakte/vkui/dist/components/Group/Group\";\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\n\n\nconst WelcomePage = ({id, userSeenWelcomePage, go, fetchedUser}) => {\n\n  return (\n    <Panel id={id} centered={true}>\n        <PanelHeader>CyberMemes</PanelHeader>\n        {(!userSeenWelcomePage && fetchedUser) && <h1>Добро пожаловать в CyberMemes App уважаемый {fetchedUser.first_name} {fetchedUser.last_name}</h1>}\n    \n\n        <Group title=\"Navigation\">\n        <Div>\n          <Button mode={\"commerce\"} size=\"xl\" onClick={go} data-to=\"home\">\n            Далее\n          </Button>\n        </Div>\n      </Group>\n    \n    </Panel>\n  );\n};\n\nexport default WelcomePage;\n","import React, { useState, useEffect } from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport ScreenSpinner from '@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport axios from 'axios'\n\n\nimport Home from './panels/Home';\nimport Second from './panels/Second';\nimport Secret from './panels/Secret';\nimport WelcomePage from './panels/WelcomePage';\n\nconst STORAGE = {\n\tUSER_STATUS: 'status'\n}\n\nconst App = () => {\n\tconst [activePanel, setActivePanel] = useState('intro');\n\tconst [fetchedUser, setUser] = useState(null);\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\tconst [comments, setComments] = useState([])\n\tconst [userScore, setUserScore] = useState(0)\n\tconst [topUsers, setTopUsers] = useState([])\n\tconst[userSeenWelcomePage, setUserSeenWelcomePage] = useState(false)\n\n\tuseEffect(() => {\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\t\tbridge.send(\"VKWebAppAllowMessagesFromGroup\", {\"group_id\": 201212699, \"key\": \"dBuBKe1kFcdemzB\"});\n\t\tasync function fetchData() {\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\n\t\t\tconst storage = await bridge.send('VKWebAppStorageGet', {\n\t\t\t\tkeys: Object.values(STORAGE)\n\t\t\t})\n\t\t\tconst data = {}\n\t\t\tstorage.keys.forEach(({key, value}) =>{\n\t\t\t\ttry{\n\t\t\t\t\tdata[key] = value? JSON.parse(value) : {}\n\t\t\t\t\tswitch(key){\n\t\t\t\t\t\tcase STORAGE.USER_STATUS:\n\t\t\t\t\t\t\tif(data[key].seenWelcomePage){\n\t\t\t\t\t\t\t\tsetActivePanel('home');\n\t\t\t\t\t\t\t\tsetUserSeenWelcomePage(true)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t} catch(error) {\n\t\t\t\t\tconsole.log(error)\n\t\t\t\t}\n\t\t\t} )\n\t\t\ttry {\n\t\t\t\tconst commentsData = await axios.get('https://airfd.site/api/v1/getUsersData/') || []\n\t\t\t\tconst userScore = await commentsData.data.filter(c=>c.userID===user.id)[0].comments.length ||0\n\t\t\t\t\n\t\t\t\tconst topArray = await commentsData.data.sort((a,b)=>{\n\t\t\t\t\treturn b.comments.length-a.comments.length\n\t\t\t\t})\n\n\t\t\t\tsetTopUsers(topArray)\n\t\t\t\tsetUserScore(userScore)\n\t\t\t\tsetComments(commentsData.data)\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error)\n\t\t\t}\n\t\t\tsetUser(user);\n\t\t\tsetPopout(null);\n\t\t}\n\t\tfetchData();\n\t}, []);\n\n\tconst go = e => {\n\t\tsetActivePanel(e.currentTarget.dataset.to);\n\t};\n\n\tconst seeWelcomePage = async (e) =>{\n\t\ttry {\n\t\t\tawait bridge.send('VKWebAppStorageSet', {\n\t\t\t\tkey: STORAGE.USER_STATUS,\n\t\t\t\tvalue: JSON.stringify({\n\t\t\t\t\tseenWelcomePage: true\n\t\t\t\t})\n\t\t\t})\n\t\t\t setActivePanel('home')\n\t\t} catch (error) {\n\t\t\tconsole.log(error)\n\t\t}\n\t}\n\n\treturn (\n\t\t<View activePanel={activePanel} popout={popout}>\n\t\t\t<Home id='home' fetchedUser={fetchedUser}  go={go} userScore={userScore} topUsers={topUsers} comments={comments}/>\n\t\t\t<WelcomePage id='intro' go={seeWelcomePage} fetchedUser={fetchedUser} userSeenWelcomePage={userSeenWelcomePage}/>\n\t\t\t<Second id='second' go={go} userScore={userScore} />\n\t\t\t<Secret id='secret' go={go} />\n\t\t</View>\n\t);\n}\n\nexport default App;\n\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}